(()=>{var e={776:(e,t,r)=>{"use strict";var a=r(795);t.H=a.createRoot,a.hydrateRoot},795:e=>{"use strict";e.exports=window.ReactDOM},530:(e,t)=>{var r;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=i(e,s(r)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)a.call(e,r)&&e[r]&&(t=i(t,r));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React;var t=r(776);const a=window.wp.components,n=window.wp.element;var s;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i.apply(null,arguments)}var o,l,c=function(t){return e.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:20,height:21,fill:"none"},t),s||(s=e.createElement("path",{stroke:"#1D70B8",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11.754v5.039c0 .445-.176.873-.488 1.188a1.66 1.66 0 0 1-1.179.492H4.167a1.66 1.66 0 0 1-1.179-.492 1.686 1.686 0 0 1-.488-1.188V7.555c0-.445.176-.872.488-1.187a1.66 1.66 0 0 1 1.179-.492h5M12.5 3.356h5v5.04M8.334 12.594 17.5 3.356"})))};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d.apply(null,arguments)}var u=function(t){return e.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},t),o||(o=e.createElement("path",{stroke:"#1D70B8",strokeWidth:1.5,d:"M19.342 11.8a.695.695 0 0 0-.68-.828h-8.219a.695.695 0 0 1-.68-.556l-.192-.967a.695.695 0 0 0-.68-.555H4.412a.695.695 0 0 0-.677.829l1.802 9.036c.066.323.35.556.68.556h11.06c.33 0 .613-.233.68-.556.283-1.429 1.048-5.266 1.385-6.958Z",clipRule:"evenodd"})),l||(l=e.createElement("path",{stroke:"#1D70B8",strokeWidth:1.5,d:"m6.327 6.808.014-2.432c0-.384.311-.695.695-.695h9.007c.384 0 .695.311.695.695l.014 4.517M8.42 5.76l5.725.006M11.54 7.85h2.605"})))};const h=window.ReactJSXRuntime,v=({listing:e})=>(0,h.jsxs)("div",{className:"directory-list",children:[(0,h.jsxs)("div",{className:"directory-list__header",children:[(0,h.jsx)("div",{className:"directory-list__logo",children:(0,h.jsx)("a",{className:"directory-list__logo--link",href:e.team_page_link,"aria-label":e.name+" logo and link to department page.",children:(0,h.jsx)(n.RawHTML,{children:e.team_logo})})}),(0,h.jsx)("div",{className:"directory-list__content",children:(0,h.jsx)("div",{className:"directory-list__description",children:(0,h.jsx)(n.RawHTML,{children:e.description})})}),(0,h.jsxs)("div",{className:"directory-list__links","data-vacancy-count":e.vacancy_count,children:[(0,h.jsxs)("div",{className:"directory-list__profile",children:[(0,h.jsx)(u,{role:"img",className:"directory-list__icon","aria-label":"See department profile"}),(0,h.jsx)("a",{href:e.team_page_link,className:"directory-list__cta",children:"See department profile"})]}),e.acf.content_team_job_search_url&&(0,h.jsxs)("div",{className:"directory-list__vacancies",children:[(0,h.jsx)(c,{role:"img",className:"directory-list__icon","aria-label":"Currently recruiting at least:"}),e.vacancy_count>0?(0,h.jsxs)(h.Fragment,{children:["Currently recruiting at least:",(0,h.jsx)("div",{className:"directory-list__no-of-vacancies",children:(0,h.jsx)("a",{href:e.acf.content_team_job_search_url,target:"_blank",className:"directory-list__job-search-url",rel:"noreferrer",children:(0,h.jsxs)("strong",{children:[e.vacancy_count," ","vacancies"]})})})]}):(0,h.jsx)("a",{href:e.acf.content_team_job_search_url,target:"_blank",className:"directory-list__job-search-url",rel:"noreferrer",children:"Check if weâ€™re currently recruiting"})]})]})]}),(0,h.jsxs)("div",{className:"directory-list__footer",children:[(0,h.jsx)("div",{className:"directory-list__logo"}),(0,h.jsx)("div",{className:"directory-list__action",children:(0,h.jsx)("a",{href:e.team_page_link,className:"button button--wide",children:(0,h.jsx)(n.RawHTML,{children:"Explore working for the "+e.name})})}),(0,h.jsx)("div",{className:"directory-list__links"})]})]}),p=window.wp.data,f=window.wp.coreData,m={flagEnabled(e,t){var r;return null!==(r=t in e.featureFlags&&e.featureFlags[t])&&void 0!==r&&r}},g=e=>(0,p.useSelect)((t=>{const r=t("featureFlags")?.flagEnabled?.(e);return r}),[e]);function y(e){return e.replace(/(&amp;|&)/gi,"and").replace(/[^a-zA-Z0-9 ]/g,"").toLowerCase()}const x=window.wp.htmlEntities,_=({onChange:t=()=>{},checked:r=!1,label:a,value:n})=>{const s=(0,e.useId)();return(0,h.jsxs)("div",{className:"directory-filters check",children:[(0,h.jsx)("input",{type:"checkbox",className:"",name:a,value:n,checked:r,onChange:t,id:s}),(0,h.jsx)("label",{htmlFor:s,children:(0,x.decodeEntities)(a)})]})};var j;function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},b.apply(null,arguments)}var w=function(t){return e.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none"},t),j||(j=e.createElement("path",{stroke:"#fff",strokeWidth:2.222,d:"M8.901 14.468a6.308 6.308 0 1 0 0-12.616 6.308 6.308 0 0 0 0 12.616ZM13.235 12.858l6.356 6.356"})))};const S=({onChange:t=()=>{},value:r="",label:a=""})=>{const n=(0,e.useId)(),s=g("enable_custom_clear_search_input");let i=(0,h.jsx)("input",{type:"search",id:n,"aria-label":a,value:r,onChange:t});return s&&(i=(0,h.jsxs)("div",{className:"js-clear-input-wrapper",children:[(0,h.jsx)("input",{type:"search",id:n,className:"js-clear-input","aria-label":a,value:r,onChange:t}),(0,h.jsx)("button",{type:"button",className:"js-clear-button","aria-label":"Clear text","aria-hidden":"true",children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,h.jsx)("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})})})]})),(0,h.jsxs)("div",{className:"directory-filters search",children:[(0,h.jsx)("label",{htmlFor:n,children:a}),(0,h.jsxs)("div",{className:"input-wrap",children:[i,(0,h.jsx)("button",{"aria-label":"Search",children:(0,h.jsx)(w,{className:"df-submit-icon"})})]})]})};var N;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},E.apply(null,arguments)}var O=function(t){return e.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none"},t),N||(N=e.createElement("path",{stroke:"#000",strokeLinecap:"round",d:"M13.75 11.25h7.5M13.75 6.25h10M13.75 16.25h5M12.5 21.25 8.75 25 5 21.25M8.75 6.25v17.5"})))};const C=({options:t,current:r,onChange:n,label:s,children:i})=>{const o=(0,e.useId)();return void 0===t?(0,h.jsx)(a.Spinner,{}):0===t.length?null:(0,h.jsxs)("div",{className:"directory-filters select",children:[i,(0,h.jsx)("label",{htmlFor:o,children:(0,x.decodeEntities)(s||"")}),(0,h.jsx)("select",{id:o,"aria-label":s,value:r,onChange:e=>n&&n(e.target.value),disabled:1===t.length,children:t.map((e=>(0,h.jsx)("option",{value:e.value,selected:e.value===r||void 0===r&&r===t[0].value,children:(0,x.decodeEntities)(e.label)},e.value)))})]})};var k=r(530),F=r.n(k);const R=({direction:e="asc",onDirectionChange:t=()=>{},current:r,options:a=[],onChange:n=()=>{}})=>(0,h.jsx)("div",{className:"directory-filters sort",children:(0,h.jsx)(C,{options:a,label:"Sort by",current:r?.value,onChange:e=>{n(a.find((t=>t.value===e)))},children:(0,h.jsx)("button",{className:F()("toggle",{active:"asc"===e}),onClick:()=>t("asc"===e?"desc":"asc"),"aria-label":"Toggle sort direction",children:(0,h.jsx)(O,{})})})}),A=({sort:e,search:t,vacancies:r})=>(0,h.jsxs)("div",{className:"directory-filters-wrap",children:[(0,h.jsx)(R,{...e}),(0,h.jsx)(S,{...t}),(0,h.jsx)(_,{...r})]}),I=({excludedCategoryIds:t})=>{const[r,n]=(0,e.useState)("asc"),[s,i]=(0,e.useState)("alpha"),[o,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)(""),u=[{value:"alpha",label:"Alphabetical",defaultDirection:"asc"},{value:"vacancies",label:"Vacancies",defaultDirection:"desc"}],m=(({sortOrder:e="asc",sortType:t="alpha",searchTerm:r="",showOnlyVacancies:a=!1,excludedCategoryIds:n=[]})=>{const s=g("enable_department_search_improvements");return(0,p.useSelect)((i=>{const o={per_page:-1,context:"view"};n.length>0&&(o.exclude=n.join(","));const l=i(f.store).getEntityRecords("taxonomy","content_team",o);if(null!==l)return l.filter((e=>!(r.length>0)||(s?y(e.name+e.description).includes(y(r)):(e.name+e.description).toLowerCase().includes(r.toLowerCase())))).filter((e=>{if(a){const t=a&&e.vacancy_count>0,r=void 0!==e.acf.content_team_job_search_url&&""!==e.acf.content_team_job_search_url;return t&&r}return!0})).sort(((r,a)=>"alpha"===t?"asc"===e?r.name.localeCompare(a.name):a.name.localeCompare(r.name):"vacancies"===t?"asc"===e?r.vacancy_count-a.vacancy_count:a.vacancy_count-r.vacancy_count:0))}),[e,t,r,a,n,s])})({sortOrder:r,sortType:s,searchTerm:c,showOnlyVacancies:o,excludedCategoryIds:t});return(0,e.useEffect)((()=>{const e=new Event("directoryRendered");document.dispatchEvent(e)}),[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(A,{sort:{current:u.find((e=>e.value===s)),onChange:e=>{e&&(i(e.value),n(e.defaultDirection))},options:u,direction:r,onDirectionChange:n},search:{value:c,onChange:e=>d(e.target.value),label:"Filter by keyword"},vacancies:{checked:o,value:"vacancies",label:"Show departments with vacancy information",onChange:e=>l(e.target.checked)}}),(0,h.jsxs)("div",{className:"directory-lists",children:[void 0===m&&(0,h.jsx)(a.Spinner,{}),m&&0===m.length&&(0,h.jsx)("div",{className:"directory-list directory-lists--no-result",children:(0,h.jsx)("h4",{children:"No listings available"})}),m&&m.length>0&&m.map(((e,t)=>(0,h.jsx)(v,{listing:e},t)))]})]})},D=window.wp.i18n,M=[{value:"no",label:"No"},{value:"yes",label:"Yes"}],T="cshr-scheme-directory-state",q=(e,t)=>{const r=((e=V,t)=>{switch(t.type){case"SET_FAVOURITES":return{...e,favourites:t.favourites};case"ADD_FAVOURITE":return e.favourites.includes(t.id)?e:{...e,favourites:[...e.favourites,t.id]};case"REMOVE_FAVOURITE":return{...e,favourites:e.favourites.filter((e=>e!==t.id))};case"TOGGLE_FAVOURITE":return e.favourites.includes(t.id)?{...e,favourites:e.favourites.filter((e=>e!==t.id))}:{...e,favourites:[...e.favourites,t.id]};default:return e}})(e,t);return localStorage.setItem(T,JSON.stringify(r)),r},L=(e=>{const t=localStorage.getItem(e);return t&&JSON.parse(t)})(T),V="object"==typeof(H=L)&&null!==H&&"favourites"in H&&Array.isArray(H.favourites)&&H.favourites.length>0&&H.favourites.every((e=>"number"==typeof e))?L:{favourites:[]};var H;const U=(0,p.createReduxStore)("scheme-directory",{reducer:q,actions:{setFavourites:e=>({type:"SET_FAVOURITES",favourites:e}),addFavourite:e=>({type:"ADD_FAVOURITE",id:e}),removeFavourite:e=>({type:"REMOVE_FAVOURITE",id:e}),toggleFavourite:e=>({type:"TOGGLE_FAVOURITE",id:e})},selectors:{getFavourites:e=>e.favourites,isFavourite:(e,t)=>e.favourites.includes(t)}}),P=({post:e})=>{const t=(r=e.featured_media,(0,p.useSelect)((e=>e(f.store).getMedia(r,{context:"view"})),[r]));var r;const a=(0,p.useSelect)((t=>t(U).isFavourite(e.id)),[e.id]),{toggleFavourite:s}=(0,p.useDispatch)(U),i=(0,D.sprintf)(/* translators: %s: post title */ /* translators: %s: post title */
(0,D.__)("Add %s to your favourite schemes"),(0,x.decodeEntities)(e.title.rendered)),o=(0,D.sprintf)(/* translators: %s: post title */ /* translators: %s: post title */
(0,D.__)("Remove %s from your favourite schemes"),(0,x.decodeEntities)(e.title.rendered));return(0,h.jsxs)("div",{className:"directory-list__item",children:[(0,h.jsxs)("div",{className:"directory-list__logo",children:[t&&(0,h.jsx)("img",{src:t.source_url,alt:t.alt_text}),(0,h.jsx)("h3",{children:(0,x.decodeEntities)(e.title.rendered)})]}),(0,h.jsx)("div",{className:"directory-list__content",children:e.excerpt&&(0,h.jsx)(n.RawHTML,{children:e.excerpt.rendered})}),(0,h.jsxs)("div",{className:"directory-list__links",children:[(0,h.jsx)("a",{href:e.link,className:"button button--wide",children:(0,D.sprintf)(/* translators: %s: post title */ /* translators: %s: post title */
(0,D.__)("Explore the %s"),(0,x.decodeEntities)(e.title.rendered))}),(0,h.jsx)("button",{className:F()("button","button--wide","button--secondary",{favourite:a}),onClick:()=>s(e.id),children:(0,h.jsx)(h.Fragment,{children:a?o:i})})]})]})},B=({qualification:e,duration:t,currentCS:r})=>(0,h.jsxs)("div",{className:"directory-filters-wrap",children:[(0,h.jsx)(C,{...e}),(0,h.jsx)(C,{...t}),(0,h.jsx)(C,{...r})]}),J=({favourites:t=!1})=>{const r=(0,p.useSelect)((e=>e(f.store).getEntityRecords("taxonomy","qualification",{per_page:-1,context:"view"})?.map((e=>({value:e.id.toString(),label:e.name}))).concat([{value:"all",label:"Select highest qualification"}])),[]),[n,s]=(0,e.useState)("all"),i=(0,p.useSelect)((e=>e(f.store).getEntityRecords("taxonomy","duration",{per_page:-1,context:"view"})?.map((e=>({value:e.id.toString(),label:e.name}))).concat([{value:"all",label:"Select duration"}])),[]),[o,l]=(0,e.useState)("all"),c=M,[d,u]=(0,e.useState)(void 0),v=(0,p.useSelect)((e=>e(U).getFavourites()),[]),m=(({sortBy:e="title",sortOrder:t="asc",qualification:r,duration:a,currentCS:n,favourites:s})=>(0,p.useSelect)((i=>{const o={per_page:-1,orderby:e,order:t,context:"view",tax_query:[]};"all"!==a&&void 0!==a&&0!==parseInt(a)&&(o.duration=a),void 0!==s&&(o.include=s.join(","));const l=i(f.store).getEntityRecords("postType","scheme",o),c="all"!==r&&void 0!==r&&0!==parseInt(r)?parseInt(r):null,d=void 0!==n&&n.length>0&&"yes"===n;return l?.filter((e=>{var t;const r=null!==(t=e.qualification)&&void 0!==t?t:[],a=void 0!==e.cs_qualification_required&&e.cs_qualification_required.length>0;return!!(null===c||r.includes(c)||d&&!a)}))}),[t,r,a,n,e,s]))({sortBy:"title",sortOrder:"asc",qualification:n,duration:o,currentCS:d,favourites:t?v:void 0});return(0,h.jsxs)(h.Fragment,{children:[!t&&(0,h.jsx)(B,{qualification:{current:n,onChange:s,options:r,label:"Your Qualification Level"},duration:{current:o,onChange:l,options:i,label:"Scheme Duration"},currentCS:{current:d,onChange:u,options:c,label:"Are you a Civil Servant?"}}),(0,h.jsxs)("div",{className:"directory-lists",children:[void 0===m&&(0,h.jsx)(a.Spinner,{}),m&&0===m.length&&(0,h.jsx)("div",{className:"directory-list directory-lists--no-result",children:(0,h.jsxs)("h4",{children:["No listings available",t&&" in your favourites. Why not browse the directory and add some?"]})}),m?.map((e=>(0,h.jsx)(P,{post:e},e.id)))]})]})};(e=>{const t={featureFlags:e},r=(0,p.createReduxStore)("featureFlags",{reducer:()=>t,selectors:m});(0,p.register)(r)})(featureFlags),document.querySelectorAll('[data-react-component="DirectoryListing"]').forEach((e=>{const r=e.getAttribute("data-attributes"),a=JSON.parse(null!=r?r:"");if("object"!=typeof a||null===a||!("termIDs"in a)||!Array.isArray(a.termIDs))throw new Error("termID not found in the JSON object");(0,t.H)(e).render((0,h.jsx)(I,{excludedCategoryIds:a.termIDs}))})),function(){const e=document.querySelectorAll('[data-react-component="SchemeDirectory"]');e.length&&(0,p.register)(U),e.forEach((e=>{try{const r=(0,t.H)(e),a=e.getAttribute("data-attributes"),n=JSON.parse(null!=a?a:"");r.render((0,h.jsx)(J,{...n}))}catch(e){throw new Error("Unable to load elements")}}))}()})()})();